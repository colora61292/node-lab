var config = require('./application').config();

exports.upload = function(uploadPath, callback) {

    var fs = require('fs');
    var path = require('path');
    var uploadExt = path.extname(uploadPath);
    var newFileName = require('kw').util.guid()+uploadExt;
    var newPath = path.join(config.fileUpload.savePath, newFileName);
    var fileUrl = path.join(config.fileUpload.rootUrl, newFileName);

    fs.readFile(uploadPath, function (err, data) {
        fs.writeFile(newPath, data, function(err){
            callback(err, {
                result: true,
                fileUrl: fileUrl,
                message: null
            });
        });
    });

};
